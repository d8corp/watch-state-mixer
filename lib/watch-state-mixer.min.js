var watchStateMixer=function(t,e){"use strict";var r=function(){function t(t){this.target=t,this.state=new e.State}return t.prototype.destructor=function(){var t;null===(t=this.watcher)||void 0===t||t.destructor(),this.watcher=void 0},t.prototype.checkWatcher=function(){var t=this;e.onClear((function(){t.watcher&&!t.watcher.updating&&t.destructor()})),this.watcher||e.unwatch((function(){var r;r=t.watcher=new e.Watch((function(e){r&&r!==t.watcher||(!e||t.state.watchers.size||t.state.caches.size?t.state.value=t.target():t.destructor())}))}))},Object.defineProperty(t.prototype,"value",{get:function(){return e.scope.activeWatcher?(this.checkWatcher(),this.state.value):this.target()},enumerable:!1,configurable:!0}),t}();return t.Mixer=r,t.getMixer=function(t,r){return e.getDecors(t)[r]},t.mixer=function(t,n,a){var c=a.value,i=a.get,u=void 0===i?c:i;return{get:function(){var t=this,a=e.getDecors(this);return n in a||e.unwatch((function(){return a[n]=new r(u.bind(t))})),a[n].value},enumerable:!0}},Object.defineProperty(t,"__esModule",{value:!0}),t}({},watchState);
